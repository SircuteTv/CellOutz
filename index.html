<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>CellOutz</title>
<link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{
  --red:#FF1A1A;
  --bg:#0B0000;
  --text:#FF1A1A;
  --accent: rgba(255,26,26,0.15);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:'Share Tech Mono',monospace;
  background:var(--bg);
  color:var(--text);
  overflow-x:hidden;
}
footer { text-align:center; margin: 40px 0 20px; }
/* Keep short phrases on one line, but let them wrap on very small screens */
.nowrap { white-space: nowrap; }
@media (max-width: 560px){ .nowrap { white-space: normal; } }

/* matrix bg */
#matrix{ position:fixed; inset:0; width:100%; height:100%; z-index:-1; background:var(--bg); }

/* header / logo / nav */
header{display:flex;flex-direction:column;align-items:center;padding:20px 40px 10px 40px;position:relative;}
.logo-container{display:flex;justify-content:center;align-items:center;margin-bottom:15px;max-width:100%;max-height:20vh;}
.logo-container img{
  max-width:480px; width:auto; max-height:100%; height:auto; object-fit:contain; display:block;
  animation:logo-glitch 3s infinite;
  opacity:0; transform: translateY(-6px) scale(0.98);
  transition: opacity 600ms ease, transform 600ms cubic-bezier(.2,.9,.2,1);
}
.logo-visible { opacity:1 !important; transform: translateY(0) scale(1) !important; }
.logo-container img:hover { transform: scale(1.1); filter: brightness(1.3); transition: transform .3s ease, filter .3s ease; }

@keyframes logo-glitch{
  0%{transform:translate(0,0)}
  20%{transform:translate(-1px,1px) rotate(-0.5deg)}
  40%{transform:translate(1px,-1px) rotate(0.5deg)}
  60%{transform:translate(-1px,1px) rotate(0)}
  80%{transform:translate(1px,-1px) rotate(-0.5deg)}
  100%{transform:translate(0,0)}
}

nav{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;align-items:center;}
nav a{
  text-decoration:none;color:var(--text);padding:8px 12px;border:1px solid var(--red);border-radius:6px;
  transition:0.3s,text-shadow 0.3s,box-shadow 0.3s;position:relative;display:flex;align-items:center;gap:6px;
}
nav a::after{ content:''; position:absolute; inset:0; background:var(--accent); mix-blend-mode:screen; opacity:0; pointer-events:none; transition:opacity .25s}
nav a:hover::after{opacity:1}
nav a:hover{ background:var(--red); color:var(--bg); box-shadow:0 0 20px var(--red), inset 0 0 40px var(--red); text-shadow:0 0 10px var(--red) }
nav .insta-link img{ width:20px;height:20px; object-fit:contain; filter: invert(27%) sepia(100%) saturate(7000%) hue-rotate(340deg) }

/* floating cart button */
#cart-button{
  position:fixed; top:18px; right:24px;
  width:64px; height:64px; border-radius:50%; display:flex; align-items:center; justify-content:center;
  border:3px solid var(--red); background:rgba(0,0,0,0.35); cursor:pointer; z-index:2000;
  transition: transform .12s ease;
}
#cart-button:hover{ transform: scale(1.03) }
#cart-button img{ width:34px; height:34px; object-fit:contain; filter: invert(27%) sepia(100%) saturate(7000%) hue-rotate(340deg) }
#cart-count{ position:absolute; top:-8px; right:-8px; width:22px; height:22px; border-radius:50%; background:var(--red); color:#000; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:12px; }
.hidden{ display:none !important; }

/* top marquee */
.marquee{ overflow:hidden; white-space:nowrap; padding:10px; border-bottom:1px solid var(--red);}
.marquee span{ display:inline-block; padding-left:100%; animation:marq 25s linear infinite, neon-glow 2s ease-in-out infinite alternate;}
@keyframes marq{ from{transform:translateX(0)} to{transform:translateX(-100%)}}
@keyframes neon-glow{ 0%{text-shadow:0 0 5px var(--red)} 50%{text-shadow:0 0 15px var(--red)} 100%{text-shadow:0 0 5px var(--red)}}

/* ========== HERO + EYES ========== */
.hero{
  position:relative; overflow:visible;
  max-width:880px; margin:30px auto; padding:22px;
  background:rgba(0,0,0,0.6); border:2px solid var(--red); border-radius:12px;
  box-shadow:0 0 20px var(--red); text-align:center;
  animation:float 3s ease-in-out infinite alternate;
}
@keyframes float{ from{transform:translateY(0)} to{transform:translateY(-8px)} }

.hero-grid{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  column-gap:clamp(12px,3vw,28px);
}
.hero-grid p{ margin:0 }

/* eye */
.eye{
  --src: url('images/eyes-trans.gif');
  --size: clamp(120px, 22vw, 220px);
  width:var(--size);
  height:auto;
  display:block;
  position:relative;
  pointer-events:none;
  filter:
    drop-shadow(0 0 8px var(--text))
    drop-shadow(0 0 18px var(--text))
    drop-shadow(0 0 36px rgba(255,26,26,0.9))
    drop-shadow(0 0 60px rgba(255,26,26,0.85));
}
.eye > img{ width:100%; height:auto; display:block; background:transparent; border:0; filter:none; }
.eye::before{
  content:""; position:absolute; inset:0; background:var(--text); opacity:.85;
  filter:blur(10px) saturate(1.4);
  -webkit-mask: var(--src) center / 100% 100% no-repeat;
          mask: var(--src) center / 100% 100% no-repeat;
}
.eye.left  { clip-path: inset(0 50% 0 0); }
.eye.right { clip-path: inset(0 0 0 50%); }

@media (max-width:900px){ .hero{ padding:18px; } .eye{ --size: clamp(100px, 26vw, 190px); } }
@media (max-width:600px){ .hero{ width:90%; padding:14px; } .eye{ --size: clamp(88px, 28vw, 160px); } }

/* belts */
h2{ text-align:center; margin-top:40px; }
.scroll-section{ overflow:hidden; white-space:nowrap; margin:20px auto 40px; max-width:100%; position:relative; border-top:1px solid var(--red); border-bottom:1px solid var(--red); padding:10px 0; box-shadow:0 0 12px var(--red); transition:box-shadow 0.3s ease;}
.scroll-section:hover{ box-shadow:0 0 25px var(--red); }
.scroll-inner{ display:inline-flex; gap:20px; will-change:transform; align-items:center; }

/* shared pill */
.gallery-pill, .prints-pill{
  display:inline-flex; align-items:center; justify-content:center;
  padding:10px 14px; border:1px solid var(--red); border-radius:999px; text-decoration:none; color:var(--text);
  text-shadow:0 0 8px var(--red); box-shadow:0 0 14px var(--red), inset 0 0 20px rgba(255,26,26,.25);
  font-weight:700; letter-spacing:.5px;
}
.gallery-pill:hover, .prints-pill:hover{ background:var(--red); color:#000; }

.card{ display:inline-block; vertical-align:top; max-height:300px; position:relative; cursor:pointer; transition: transform 0.25s ease; }
.card img{ display:block; max-height:300px; height:auto; border-radius:8px; }
.card .info{ position:absolute; bottom:0; left:0; right:0; background:rgba(0,0,0,0.8); color:var(--red); padding:8px 10px; font-size:14px; opacity:0; transition:opacity .25s, transform .25s; text-align:center; border-top:1px solid var(--red); }
.card:hover .info{ opacity:1; transform:translateY(-6px) }
.card:hover{ transform: translateY(-6px) scale(1.02); }

/* responsive bits */
@media(max-width:600px){
  .hero{ width:90%; padding:15px;}
  .card img{ max-height:150px }
  #cart-button{ width:56px; height:56px }
  #cart-button img{ width:28px; height:28px }
}
</style>
</head>
<body>

<canvas id="matrix"></canvas>

<header>
  <div class="logo-container">
    <a href="index.html"><img id="site-logo" src="images/logo.png" alt="CellOutz Logo"></a>
  </div>
  <nav>
    <a href="index.html">HOME</a>
    <a href="prints.html">PRINTS</a>
    <a href="clothes.html">CLOTHES</a>
    <a class="insta-link" href="https://www.instagram.com/allusionstoograndeur/" target="_blank" aria-label="Instagram">
      <img src="images/instagram.png" alt="">
    </a>
    <a href="blog.html">BLOG</a>
    <a href="gallery.html">GALLERY</a>
    <a href="contact.html">CONTACT</a>
  </nav>
  <div id="cart-button" aria-label="Cart" title="Cart">
    <img src="images/cart.png" alt="Cart">
    <div id="cart-count" class="hidden">0</div>
  </div>
</header>

<div class="marquee"><span>* CURRENT DROPS — Limited prints from Present Polarity / Chaos Wizard / Genesis *</span></div>

<!-- HERO with eyes INSIDE (left/text/right) -->
<div class="hero">
  <div class="hero-grid">
    <div class="eye left"><img src="images/eyes-trans.gif" alt=""></div>

    <p>
      <strong>This is not a brand.</strong><br>
      It’s the slow release of
      <span class="nowrap"><em>Allusions&nbsp;Too&nbsp;Grandeur</em>&nbsp;—</span><br>
      relics from a collapsing dream,<br>
      rare fragments of an ongoing hallucination.
    </p>

    <div class="eye right"><img src="images/eyes-trans.gif" alt=""></div>
  </div>
</div>

<h2>Current Drops</h2>
<div class="scroll-section" id="scroll-drops">
  <div class="scroll-inner" id="current-drops-inner"></div>
</div>

<h2>Gallery</h2>
<div class="scroll-section" id="scroll-gallery">
  <div class="scroll-inner" id="gallery-inner"></div>
</div>

<footer>© 2025 CellOutz</footer>

<script>
/* ===== Matrix background ===== */
const canvas = document.getElementById('matrix');
const ctx = canvas.getContext('2d');
let letters = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ@#$%^&*",
    fontSize = 16,
    cols, drops;

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  cols = Math.floor(canvas.width / fontSize);
  drops = Array(cols).fill(0);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function drawMatrix(){
  ctx.fillStyle = "rgba(11,0,0,0.1)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "#FF1A1A";
  ctx.font = fontSize + "px monospace";
  for(let i=0;i<cols;i++){
    const text = letters[Math.floor(Math.random()*letters.length)];
    ctx.fillText(text, i*fontSize, drops[i]);
    drops[i] += fontSize;
    if(drops[i] > canvas.height && Math.random() > 0.975) drops[i] = 0;
  }
}
setInterval(drawMatrix, 50);

/* ===== DATA (drops only from Grandeur: Present Polarity / Chaos Wizard / Genesis) ===== */
const SELL_COLLECTIONS = [
  { title:"Present Polarity", folder:"Present Polarity", files: Array.from({length:4}, (_,i)=>`art (${i+1}).webp`) },
  { title:"Chaos Wizard",     folder:"chaos wizard",     files: Array.from({length:9}, (_,i)=>`chaos (${i+1}).webp`) },
  { title:"Genesis",          folder:"Genesis",          files: ["latr.webp"] }
];

/* Flatten to items and keep collection + file for linking */
const DROPS_ITEMS = SELL_COLLECTIONS.flatMap(col =>
  col.files.map(f=>({
    src: `images/${encodeURIComponent(col.folder)}/${f}`,
    collection: col.title,
    file: f,
    name: `${col.title}`,
    desc: `Limited edition print — ${col.title}`
  }))
);

/* Gallery belt reuses the same (so it never pulls Misc) */
const GALLERY_ITEMS = DROPS_ITEMS.map(d => ({ src: d.src, name: d.name }));

/* ===== Card builders ===== */
function createCard(obj, isDrop=false){
  const card = document.createElement('div');
  card.className = 'card';
  card.dataset.src = obj.src;
  if(obj.name) card.dataset.name = obj.name;
  if(obj.desc) card.dataset.desc = obj.desc;
  if(obj.collection) card.dataset.collection = obj.collection;
  if(obj.file) card.dataset.file = obj.file;

  const img = document.createElement('img');
  img.src = obj.src;
  img.alt = obj.name || 'Art';
  img.loading = 'lazy';
  img.decoding = 'async';
  img.addEventListener('error', ()=> card.style.display = 'none'); // hide missing files gracefully
  card.appendChild(img);

  if(isDrop){
    const info = document.createElement('div');
    info.className = 'info';
    info.innerHTML = `<p>${obj.name}</p><p>View options →</p>`;
    card.appendChild(info);

    // clicking a drop goes to prints.html carrying context
    card.addEventListener('click', ()=>{
      const params = new URLSearchParams({
        collection: card.dataset.collection || '',
        file: card.dataset.file || ''
      });
      window.location.href = `prints.html?${params.toString()}`;
    });
  }

  return card;
}

function populateBelt(container, items, isDrop=false){
  items.forEach(item => container.appendChild(createCard(item, isDrop)));
  // duplicate once for the seamless loop
  Array.from(container.children).forEach(node => container.appendChild(node.cloneNode(true)));
}

/* ===== Render both belts ===== */
const dropsContainer   = document.getElementById('current-drops-inner');
const galleryContainer = document.getElementById('gallery-inner');

/* FIRST in belt: pill to prints */
const printsPill = document.createElement('a');
printsPill.href = 'prints.html';
printsPill.className = 'prints-pill';
printsPill.textContent = 'Shop prints →';
dropsContainer.appendChild(printsPill);

/* Drops (left-moving) — pick 8 random from sell list */
const drops8 = DROPS_ITEMS.sort(()=>Math.random()-0.5).slice(0,8);
populateBelt(dropsContainer, drops8, true);

/* Gallery (right-moving) + pill first — pulls from Grandeur-only list */
const pill = document.createElement('a');
pill.href = 'gallery.html';
pill.className = 'gallery-pill';
pill.textContent = 'Find more in the Gallery →';
galleryContainer.appendChild(pill);
populateBelt(galleryContainer, GALLERY_ITEMS, false);

/* ===== Infinite scroll + speed zones (no pause) ===== */
let dropsOffset   = 0; // left-moving
let galleryOffset = 0; // right-moving

const BASE_SPEED  = 1.0;
const BOOST_SPEED = 2.2;  // at matching edge
const SLOW_SPEED  = 0.28; // center crawl

let dropsSpeed   = BASE_SPEED;
let gallerySpeed = BASE_SPEED;

function computeSpeedFactor(e, container, direction){
  const rect = container.getBoundingClientRect();
  const pct  = (e.clientX - rect.left) / rect.width; // 0..1
  if (pct > 0.40 && pct < 0.60) return SLOW_SPEED;          // middle slows
  if (direction === 'left'  && pct < 0.10) return BOOST_SPEED;  // far left boosts
  if (direction === 'right' && pct > 0.90) return BOOST_SPEED;  // far right boosts
  return 1;
}

function recycleLeft(container){
  const first = container.firstElementChild;
  if(!first) return 0;
  const rect = first.getBoundingClientRect();
  if(rect.right < -2){
    const gap = parseInt(getComputedStyle(container).gap || 20);
    const w   = first.offsetWidth + gap;
    container.appendChild(first);
    return w;
  }
  return 0;
}
function recycleRight(container){
  const last = container.lastElementChild;
  if(!last) return 0;
  const rect = last.getBoundingClientRect();
  if(rect.left > window.innerWidth + 2){
    const gap = parseInt(getComputedStyle(container).gap || 20);
    const w   = last.offsetWidth + gap;
    container.insertBefore(last, container.firstElementChild);
    return w;
  }
  return 0;
}

/* Animator */
function animate(){
  // Drops: move left
  dropsOffset -= dropsSpeed;
  dropsContainer.style.transform = `translateX(${dropsOffset}px)`;
  const adjL = recycleLeft(dropsContainer);
  if (adjL) dropsOffset += adjL;

  // Gallery: move right
  galleryOffset += gallerySpeed;
  galleryContainer.style.transform = `translateX(${galleryOffset}px)`;
  const adjR = recycleRight(galleryContainer);
  if (adjR) galleryOffset -= adjR;

  requestAnimationFrame(animate);
}
requestAnimationFrame(animate);

/* Speed-zone listeners */
const dropsSection   = document.getElementById('scroll-drops');
const gallerySection = document.getElementById('scroll-gallery');

dropsSection.addEventListener('mousemove', (e)=>{ dropsSpeed   = BASE_SPEED * computeSpeedFactor(e, dropsSection, 'left'); });
dropsSection.addEventListener('mouseleave', ()=>{ dropsSpeed   = BASE_SPEED; });

gallerySection.addEventListener('mousemove', (e)=>{ gallerySpeed = BASE_SPEED * computeSpeedFactor(e, gallerySection, 'right'); });
gallerySection.addEventListener('mouseleave', ()=>{ gallerySpeed = BASE_SPEED; });

/* Logo intro */
const logo = document.getElementById('site-logo');
const seen = sessionStorage.getItem('celloutz_logo_seen');
if(!seen){
  setTimeout(()=> logo.classList.add('logo-visible'), 80);
  sessionStorage.setItem('celloutz_logo_seen','1');
} else {
  logo.classList.add('logo-visible');
}
</script>
</body>
</html>
